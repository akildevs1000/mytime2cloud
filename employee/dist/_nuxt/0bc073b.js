(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{986:function(e,t,o){"use strict";o.r(t);var n=o(19),r=(o(74),o(51),o(79),o(4),o(14),{data:function(){return{map:null,geocoder:null,infowindow:null,locations:[],initialLatLon:[]}},mounted:function(){this.loadGoogleMapsScript(this.initMap)},created:function(){this.plotLocations(),setInterval(this.plotLocations,6e4)},methods:{loadGoogleMapsScript:function(e){var script=document.createElement("script");script.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA1gRWcOb3kuzIvykjNeJ8ezm4l5YCpJFw",script.async=!0,script.defer=!0,script.addEventListener("load",e),document.head.appendChild(script)},plotLocations:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n,data,r,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=e.$auth.user.employee,e.UserID=o.system_user_id,t.next=5,e.$axios.get("/realtime_location",{params:{company_id:e.$auth.user.company_id,UserID:e.UserID,date:e.$route.params.date}});case 5:if(n=t.sent,(data=n.data.data)&&0!==data.length){t.next=10;break}return console.error("No location data available."),t.abrupt("return");case 10:r=data[0],e.initialLatLon=[r.latitude,r.longitude],l=data.map((function(e){var t=e.latitude,o=e.longitude;return{lat:parseFloat(t),lng:parseFloat(o)}})),new google.maps.Polyline({path:l,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2}).setMap(e.map),c=new google.maps.InfoWindow,data.forEach((function(t){var o=t.latitude,n=t.longitude,r=t.datetime,l={lat:parseFloat(o),lng:parseFloat(n)},marker=new google.maps.Marker({position:l,map:e.map});marker.addListener("click",(function(){e.geocoder.geocode({location:l}).then((function(t){t.results[0]?(c.setContent(r),c.open(e.map,marker)):window.alert("No results found")})).catch((function(e){return window.alert("Geocoder failed due to: "+e)}))}))})),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),console.error("Error fetching data from the API:",t.t0);case 22:case"end":return t.stop()}}),t,null,[[0,19]])})))()},initMap:function(){this.map=new google.maps.Map(document.getElementById("map"),{zoom:8,center:{lat:25.276987,lng:55.296249}}),this.geocoder=new google.maps.Geocoder,this.infowindow=new google.maps.InfoWindow}}}),l=o(72),component=Object(l.a)(r,(function(){this._self._c;return this._m(0)}),[function(){var e=this._self._c;return e("div",[e("div",{staticStyle:{height:"100vh"},attrs:{id:"map"}})])}],!1,null,null,null);t.default=component.exports}}]);