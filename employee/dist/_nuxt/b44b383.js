(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{964:function(e,t,n){"use strict";n.r(t);var r=n(706),o=n(747),c=n(755),l=n(723),m=n(916),d=n(162),v=n(210),h=n(754),y=n(719),f=n(78),_=n(19),E=(n(74),n(33),{data:function(){return{name:"",system_user_id:"",dialog:!1,openCameraDialog:!1,response:"",cameraElement:null,canvasElement:null,errorMessageElement:null,imageSrc:""}},mounted:function(){this.cameraElement=document.getElementById("camera"),this.canvasElement=document.getElementById("canvas"),this.errorMessageElement=document.getElementById("errorMessage"),this.startCamera()},created:function(){this.name=this.$auth.user.employee.first_name,this.system_user_id=this.$auth.user.employee.system_user_id},methods:{startCamera:function(){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});case 3:n=t.sent,e.cameraElement.srcObject=n,e.errorMessageElement.style.display="none",t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error accessing camera:",t.t0),e.errorMessageElement.style.display="block",document.getElementById("cameraContainer").style.display="none";case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},capturePhoto:function(){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.canvasElement.width=e.cameraElement.videoWidth,e.canvasElement.height=e.cameraElement.videoHeight,e.canvasElement.getContext("2d").drawImage(e.cameraElement,0,0,e.canvasElement.width,e.canvasElement.height),e.canvasElement.toBlob(function(){var t=Object(_.a)(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new FormData,t.t0=r,t.next=4,n;case 4:t.t1=t.sent,t.t0.append.call(t.t0,"faceImage",t.t1,"image.jpg"),r.append("name",e.name),r.append("system_user_id",e.system_user_id),r.append("company_id",e.$auth.user.company_id),e.$axios.post("https://backend.ideahrms.com/api/store-temp-image",r).then((function(t){t.data;var n=t.status;e.dialog=!0,e.response=200==n?"You have been enrolled successfully":"You cannot enroll"})).catch((function(e){return console.error(e)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),"image/jpeg");case 4:case"end":return t.stop()}}),t)})))()}}}),w=E,k=n(72),component=Object(k.a)(w,(function(){var e=this,t=e._self._c;return t(l.a,[t(h.a,{attrs:{justify:"center"}},[t(c.a,{attrs:{cols:"12",sm:"8",md:"6"}},[t(m.a,{attrs:{persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(o.a,[t(f.a,{attrs:{dense:"",color:"purple"}},[e._v("\n            "+e._s(e.response)+"\n            "),e._v(" "),t(y.a),e._v(" "),t(d.a,{on:{click:function(t){e.dialog=!1}}},[e._v("mdi-close-circle-outline")])],1)],1)],1),e._v(" "),t("div",{staticClass:"text-center",staticStyle:{width:"250px",height:"auto",margin:"0 auto"},attrs:{id:"cameraContainer"}},[t("video",{staticStyle:{width:"100%",height:"auto"},attrs:{id:"camera",autoplay:"",playsinline:""}}),e._v(" "),t("br"),e._v(" "),t(r.a,{attrs:{block:"",color:"primary"},on:{click:e.capturePhoto}},[e._v("Capture")]),e._v(" "),t("canvas",{staticStyle:{display:"none"},attrs:{id:"canvas"}}),e._v(" "),t(v.a,{attrs:{src:this.imageSrc}})],1),e._v(" "),t("p",{staticStyle:{display:"none",color:"red"},attrs:{id:"errorMessage"}},[e._v("\n        Camera not found or access denied.\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);