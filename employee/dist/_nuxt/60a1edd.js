(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{760:function(e,t,n){"use strict";n.r(t);var o=n(747),r={name:"BaseCard"},d=n(72),component=Object(d.a)(r,(function(){var e=this;return(0,e._self._c)(o.a,{class:e.$isDark()?"accent white--text":"light-background black--text"},[e._t("body")],2)}),[],!1,null,null,null);t.default=component.exports},809:function(e,t,n){"use strict";n.r(t);var o=n(955),r=(n(15),n(70),n(33),n(2)),d=(n(441),n(27),n(79),n(28),n(294),n(51),n(295),n(216),{data:function(){var e;return e={active_el:"",selectedItem:null,totalRowsCount:0},Object(r.a)(e,"selectedItem",{}),Object(r.a)(e,"datatable_search_textbox",""),Object(r.a)(e,"filter_employeeid",""),Object(r.a)(e,"snack",!1),Object(r.a)(e,"snackColor",""),Object(r.a)(e,"snackText",""),Object(r.a)(e,"content","\n        <h1>Yay Headlines!</h1>\n        <p>All these <strong>cool tags</strong> are working now.</p>\n          "),Object(r.a)(e,"scrollInvoked",0),Object(r.a)(e,"start_menu",!1),Object(r.a)(e,"end_menu",!1),Object(r.a)(e,"title",""),Object(r.a)(e,"des",""),Object(r.a)(e,"desDate",""),Object(r.a)(e,"dept",""),Object(r.a)(e,"options",{}),Object(r.a)(e,"Model","Announcement"),Object(r.a)(e,"endpoint","announcement"),Object(r.a)(e,"search",""),Object(r.a)(e,"snackbar",!1),Object(r.a)(e,"dialog",!1),Object(r.a)(e,"ids",[]),Object(r.a)(e,"departments",[]),Object(r.a)(e,"loading",!1),Object(r.a)(e,"total",0),Object(r.a)(e,"headers",[{text:"Title",align:"left",sortable:!0,key:"title",value:"title",fieldType:"text"},{text:"Description",align:"left",sortable:!0,key:"description",value:"description",fieldType:"text"},{text:"Date Range",align:"left",sortable:!1,key:"date_range",value:"start_date",fieldType:"date_range_picker"},{text:"Category",align:"left",sortable:!1,key:"categories",value:"category",fieldType:"dropdown"}]),Object(r.a)(e,"editedIndex",-1),Object(r.a)(e,"editedItem",{title:"",description:"",departments:[],employees:[],start_date:null,end_date:null}),Object(r.a)(e,"defaultItem",{title:"",description:"",departments:[],employees:[],start_date:null,end_date:null}),Object(r.a)(e,"response",""),Object(r.a)(e,"data",[]),Object(r.a)(e,"errors",[]),Object(r.a)(e,"options_dialog",{}),Object(r.a)(e,"employees_dialog",[]),Object(r.a)(e,"selectAllDepartment",!1),Object(r.a)(e,"selectAllEmployee",!1),e},computed:{formTitle:function(){return-1===this.editedIndex?"New":"Edit"},getCurrentDate:function(){var e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(o)},isIndeterminateDepartment:function(){return this.editedItem.departments.length>0&&this.editedItem.departments.length<this.departments.length},isIndeterminateEmployee:function(){return this.editedItem.employees.length>0&&this.editedItem.employees.length<this.employees_dialog.length}},watch:{selectAllDepartment:function(e){this.editedItem.departments=e?this.departments.map((function(e){return e.id})):[]},selectAllEmployee:function(e){this.editedItem.employees=e?this.employees_dialog.map((function(e){return e.id})):[]},dialog:function(e){e||this.close(),this.errors=[],this.search=""},options:{handler:function(){},deep:!0}},created:function(){this.loading=!0,this.getDataFromApi()},methods:{showContent:function(e){this.active_el=e.id,this.selectedItem=e},getUserPic:function(e){return null==e.user?"/no-profile-image.jpg":e.user&&"company"==e.user.user_type?e.user.company.logo:e.user&&"employee"==e.user.user_type?e.user.employee.profile_picture||"/no-profile-image.jpg":void 0},datatable_cancel:function(){this.datatable_search_textbox=""},datatable_open:function(){this.datatable_search_textbox=""},datatable_close:function(){this.loading=!1},toggleDepartmentSelection:function(){this.selectAllDepartment=!this.selectAllDepartment},toggleEmployeeSelection:function(){this.selectAllEmployee=!this.selectAllEmployee},onScroll:function(){this.scrollInvoked++},getDepartments:function(){var e=this,t={params:{per_page:1e3,company_id:this.$auth.user.company_id}};this.$axios.get("departments",t).then((function(t){var data=t.data;e.departments=data.data}))},employeesByDepartment:function(){var e=this;this.loading_dialog=!0;var t=this.options_dialog,n=t.page,o=t.itemsPerPage,r={params:{department_ids:this.editedItem.departments,per_page:o,page:n,company_id:this.$auth.user.company_id}};this.editedItem.departments.length?this.$axios.get("employeesByDepartment",r).then((function(t){var data=t.data;e.employees_dialog=data.data,e.loading_dialog=!1})):this.getEmployees()},logout:function(){var e=this;this.$axios.get("/logout").then((function(t){t.res;e.$auth.logout(),e.$router.push("/login")}))},getDataFromApi:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.endpoint,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!this.$auth.user.employee)return this.logout(),!1;""==t&&(t=this.endpoint),this.loading=!0;var r=this.options,d=r.page,l=(r.itemsPerPage,this.$auth.user.company_id);""!=n&&(options.params[n]=o),this.$axios.get("employee-announcements/".concat(this.$auth.user.employee.id,"?page=").concat(d||1,"&company_id=").concat(l,"&per_page=").concat(1e4)).then((function(t){var data=t.data;if(""!=n&&0==data.data.length)return e.snack=!0,e.snackColor="error",e.snackText="No Results Found",e.loading=!1,!1;data.data[0]&&e.showContent(data.data[0]),e.data=data.data,e.total=data.total,e.loading=!1,e.totalRowsCount=data.total}))},searchIt:function(e){0==e.length?this.getDataFromApi():e.length>2&&this.getDataFromApi("".concat(this.endpoint,"/search/").concat(e))},editItem:function(e){this.editedIndex=this.data.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0,this.editedItem.departments=e.departments.map((function(e){return e.id})),this.editedItem.employees=e.employees.map((function(e){return e.id}))},delteteSelectedRecords:function(){var e=this;confirm("Are you sure you wish to delete selected records , to mitigate any inconvenience in future.")&&this.$axios.post("".concat(this.endpoint,"/delete/selected"),{ids:this.ids.map((function(e){return e.id}))}).then((function(t){var data=t.data;data.status?(e.snackbar=data.status,e.ids=[],e.response="Selected records has been deleted"):e.errors=data.errors,e.getDataFromApi()})).catch((function(e){return console.log(e)}))},deleteItem:function(e){var t=this;confirm("Are you sure you wish to delete , to mitigate any inconvenience in future.")&&this.$axios.delete(this.endpoint+"/"+e.id).then((function(e){var data=e.data;data.status?(t.getDataFromApi(),t.snackbar=data.status,t.response=data.message):t.errors=data.errors})).catch((function(e){return console.log(e)}))},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},getEmployees:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"employee";this.loading=!0;var n=this.options,o=n.page,r={params:{per_page:n.itemsPerPage,company_id:this.$auth.user.company_id}};this.$axios.get("".concat(t,"?page=").concat(o),r).then((function(t){var data=t.data;e.employees_dialog=data.data}))},save:function(){var e=this;this.editedItem.company_id=this.$auth.user.company_id,this.editedIndex>-1?this.$axios.put(this.endpoint+"/"+this.editedItem.id,this.editedItem).then((function(t){var data=t.data;if(data.status){var n=e.data.findIndex((function(t){return t.id==e.editedItem.id}));e.data.splice(n,1,{id:e.editedItem.id,name:e.editedItem.name}),e.getDataFromApi(),e.snackbar=data.status,e.response=data.message,e.close()}else e.errors=data.errors})).catch((function(e){return console.log(e)})):this.$axios.post(this.endpoint,this.editedItem).then((function(t){var data=t.data;data.status?(e.getDataFromApi(),e.snackbar=data.status,e.response=data.message,e.close(),e.errors=[],e.search=""):e.errors=data.errors})).catch((function(e){return console.log(e)}))}}}),l=d,c=n(72),component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t(o.a,{class:e.$isDark()?"accent custom-dark-header-for-datatable":"light-background custom-light-header-for-datatable",attrs:{"calculate-widths":"","item-key":"id",headers:e.headers,items:e.data,loading:e.loading,options:e.options,"footer-props":{itemsPerPageOptions:[10,50,100,500,1e3]},"server-items-length":e.totalRowsCount},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.description",fn:function(n){var o=n.item;return[t("div",{domProps:{innerHTML:e._s(o.description)}})]}},{key:"item.category",fn:function(n){var o,r,d=n.item;return[t("span",{style:e.$util.getPriorityColor(null==d||null===(o=d.category)||void 0===o?void 0:o.name)},[e._v(e._s(null==d||null===(r=d.category)||void 0===r?void 0:r.name))])]}}]),model:{value:e.ids,callback:function(t){e.ids=t},expression:"ids"}})}),[],!1,null,null,null);t.default=component.exports},993:function(e,t,n){"use strict";n.r(t);var o=n(72),component=Object(o.a)({},(function(){var e=this._self._c;return e("SnippetsCard",{staticClass:"px-5",scopedSlots:this._u([{key:"body",fn:function(){return[e("Announcement")]},proxy:!0}])})}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Announcement:n(809).default,SnippetsCard:n(760).default})}}]);